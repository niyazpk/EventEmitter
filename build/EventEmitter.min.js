/*! EventEmitter 2014-02-08 */
var EventEmitter=function(){this._events={},this._maxListeners=10};EventEmitter.prototype=function(){function a(){"undefined"!=typeof window&&(console=window.console),console&&console.log(arguments)}function b(a){return"[object Number]"===toString.call(a)}function c(a){return"function"==typeof a}return{on:function(b,d){if(!c(d))throw new TypeError("listener must be a function");this.emit("newListener",b,d),this._events[b]=this._events[b]||[],this._events[b].push(d);var e=this._maxListeners;return e>0&&this._events[b].length>e&&a("Error: Exceeded maxListeners. Use emitter.setMaxListeners() to increase limit."),this},off:function(a,b){if(a in this._events){var c=this._events[a].indexOf(b);-1!==c&&(this._events[a].splice(c,1),this.emit("removeListener",a,b))}return this},once:function(a,b){var c=this;c.on(a,function d(){c.removeListener(a,d),b.apply(this,arguments)})},setMaxListeners:function(a){if(!b(a)||0>a||isNaN(a))throw new TypeError("n must be a positive number");return this._maxListeners=a||0,this},removeAllListeners:function(a){return a?delete this._events[a]:this._events={},this},listeners:function(a){return(this._events[a]||[]).slice()},emit:function(a){var b=Array.prototype.slice.call(arguments,1),c=this._events[a],d=c?c.length:0;if(d){for(;d--;)c[d].apply(this,b);return!0}if("error"===a){var e=arguments[1];throw e instanceof Error?e:new Error('Uncaught, unspecified "error" event.')}return!1}}}(),EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prototype.removeListener=EventEmitter.prototype.off,EventEmitter.mixin=function(a){for(var b=["on","off","once","emit","setMaxListeners","removeAllListeners","listeners","addListener","removeListener"],c=0;c<b.length;c++)"function"==typeof a?a.prototype[b[c]]=EventEmitter.prototype[b[c]]:a[b[c]]=EventEmitter.prototype[b[c]];a._events={},a._maxListeners=10},EventEmitter.listenerCount=function(a,b){return a.listeners(b).length},"undefined"!=typeof module&&"exports"in module&&(module.exports=EventEmitter);